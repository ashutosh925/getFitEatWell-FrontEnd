{"ast":null,"code":"import*as firebase from\"firebase/app\";import{history}from\"../../../history\";import\"firebase/auth\";import\"firebase/database\";import axios from\"axios\";import{config}from\"../../../authServices/firebase/firebaseConfig\";// Init firebase if not already initialized\nif(!firebase.apps.length){firebase.initializeApp(config);}var firebaseAuth=firebase.auth();export var signupWithFirebase=function signupWithFirebase(email,password,name){return function(dispatch){var userEmail=null,loggedIn=false;//  userName = null\nfirebaseAuth.createUserWithEmailAndPassword(email,password).then(function(result){firebaseAuth.onAuthStateChanged(function(user){result.user.updateProfile({displayName:name});if(user){userEmail=user.email;// let userName = user.displayName\nloggedIn=true;dispatch({type:\"SIGNUP_WITH_EMAIL\",payload:{email:userEmail,name:name,isSignedIn:loggedIn}});dispatch({type:\"LOGIN_WITH_EMAIL\",payload:{email:userEmail,name:name}});}});history.push(\"/\");}).catch(function(error){console.log(error.message);});};};export var signupWithJWT=function signupWithJWT(signupData){console.log(signupData);// first_name : \"\",\n// last_name : \"\",\n// email: \"\",\n// password: \"\",\n// mobile: \"\",\n// confirmPass: \"\"\nreturn function(dispatch){axios.post(\"/api/authenticate/register/user\",{email:'john@doe.com',password:'1234',name:'john'}).then(function(response){var loggedInUser;if(response.data){console.log(response.data);loggedInUser=response.data.user;localStorage.setItem(\"token\",response.data.token);dispatch({type:\"LOGIN_WITH_JWT\",payload:{loggedInUser:loggedInUser,loggedInWith:\"jwt\"}});history.push(\"/\");}}).catch(function(err){return console.log(err);});};};","map":{"version":3,"sources":["/Users/roy/Desktop/Projects/getFit-frontEnd/src/redux/actions/auth/registerActions.js"],"names":["firebase","history","axios","config","apps","length","initializeApp","firebaseAuth","auth","signupWithFirebase","email","password","name","dispatch","userEmail","loggedIn","createUserWithEmailAndPassword","then","result","onAuthStateChanged","user","updateProfile","displayName","type","payload","isSignedIn","push","catch","error","console","log","message","signupWithJWT","signupData","post","response","loggedInUser","data","localStorage","setItem","token","loggedInWith","err"],"mappings":"AAAA,MAAO,GAAKA,CAAAA,QAAZ,KAA0B,cAA1B,CACA,OAASC,OAAT,KAAwB,kBAAxB,CACA,MAAO,eAAP,CACA,MAAO,mBAAP,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,MAAT,KAAuB,+CAAvB,CAEA;AACA,GAAI,CAACH,QAAQ,CAACI,IAAT,CAAcC,MAAnB,CAA2B,CACzBL,QAAQ,CAACM,aAAT,CAAuBH,MAAvB,EACD,CAED,GAAII,CAAAA,YAAY,CAAGP,QAAQ,CAACQ,IAAT,EAAnB,CAEA,MAAO,IAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,KAAD,CAAQC,QAAR,CAAkBC,IAAlB,CAA2B,CAC3D,MAAO,UAAAC,QAAQ,CAAI,CACjB,GAAIC,CAAAA,SAAS,CAAG,IAAhB,CACEC,QAAQ,CAAG,KADb,CAEE;AAEFR,YAAY,CACTS,8BADH,CACkCN,KADlC,CACyCC,QADzC,EAEGM,IAFH,CAEQ,SAAAC,MAAM,CAAI,CACdX,YAAY,CAACY,kBAAb,CAAgC,SAAAC,IAAI,CAAI,CACtCF,MAAM,CAACE,IAAP,CAAYC,aAAZ,CAA0B,CACxBC,WAAW,CAAEV,IADW,CAA1B,EAGA,GAAIQ,IAAJ,CAAU,CACRN,SAAS,CAAGM,IAAI,CAACV,KAAjB,CACA;AACAK,QAAQ,CAAG,IAAX,CACAF,QAAQ,CAAC,CACPU,IAAI,CAAE,mBADC,CAEPC,OAAO,CAAE,CACPd,KAAK,CAAEI,SADA,CAEPF,IAAI,CAAJA,IAFO,CAGPa,UAAU,CAAEV,QAHL,CAFF,CAAD,CAAR,CAQAF,QAAQ,CAAC,CACPU,IAAI,CAAE,kBADC,CAEPC,OAAO,CAAE,CACPd,KAAK,CAAEI,SADA,CAEPF,IAAI,CAAJA,IAFO,CAFF,CAAD,CAAR,CAOD,CACF,CAxBD,EAyBAX,OAAO,CAACyB,IAAR,CAAa,GAAb,EACD,CA7BH,EA8BGC,KA9BH,CA8BS,SAAAC,KAAK,CAAI,CACdC,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,OAAlB,EACD,CAhCH,EAiCD,CAtCD,CAuCD,CAxCM,CA0CP,MAAO,IAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,UAAD,CAAgB,CAE3CJ,OAAO,CAACC,GAAR,CAAYG,UAAZ,EACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAO,UAAApB,QAAQ,CAAI,CACjBX,KAAK,CACFgC,IADH,CACQ,iCADR,CAC2C,CACvCxB,KAAK,CAAE,cADgC,CAEvCC,QAAQ,CAAE,MAF6B,CAGvCC,IAAI,CAAE,MAHiC,CAD3C,EAMGK,IANH,CAMQ,SAAAkB,QAAQ,CAAI,CAChB,GAAIC,CAAAA,YAAJ,CAEA,GAAGD,QAAQ,CAACE,IAAZ,CAAiB,CAEfR,OAAO,CAACC,GAAR,CAAYK,QAAQ,CAACE,IAArB,EAEAD,YAAY,CAAGD,QAAQ,CAACE,IAAT,CAAcjB,IAA7B,CAEAkB,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BJ,QAAQ,CAACE,IAAT,CAAcG,KAA5C,EAEA3B,QAAQ,CAAC,CACPU,IAAI,CAAE,gBADC,CAEPC,OAAO,CAAE,CAAEY,YAAY,CAAZA,YAAF,CAAgBK,YAAY,CAAE,KAA9B,CAFF,CAAD,CAAR,CAKAxC,OAAO,CAACyB,IAAR,CAAa,GAAb,EACD,CAEF,CAzBH,EA0BGC,KA1BH,CA0BS,SAAAe,GAAG,QAAIb,CAAAA,OAAO,CAACC,GAAR,CAAYY,GAAZ,CAAJ,EA1BZ,EA4BD,CA7BD,CA8BD,CAvCM","sourcesContent":["import * as firebase from \"firebase/app\"\nimport { history } from \"../../../history\"\nimport \"firebase/auth\"\nimport \"firebase/database\"\nimport axios from \"axios\"\nimport { config } from \"../../../authServices/firebase/firebaseConfig\"\n\n// Init firebase if not already initialized\nif (!firebase.apps.length) {\n  firebase.initializeApp(config)\n}\n\nlet firebaseAuth = firebase.auth()\n\nexport const signupWithFirebase = (email, password, name) => {\n  return dispatch => {\n    let userEmail = null,\n      loggedIn = false\n      //  userName = null\n\n    firebaseAuth\n      .createUserWithEmailAndPassword(email, password)\n      .then(result => {\n        firebaseAuth.onAuthStateChanged(user => {\n          result.user.updateProfile({\n            displayName: name\n          })\n          if (user) {\n            userEmail = user.email\n            // let userName = user.displayName\n            loggedIn = true\n            dispatch({\n              type: \"SIGNUP_WITH_EMAIL\",\n              payload: {\n                email: userEmail,\n                name,\n                isSignedIn: loggedIn\n              }\n            })\n            dispatch({\n              type: \"LOGIN_WITH_EMAIL\",\n              payload: {\n                email: userEmail,\n                name\n              }\n            })\n          }\n        })\n        history.push(\"/\")\n      })\n      .catch(error => {\n        console.log(error.message)\n      })\n  }\n}\n\nexport const signupWithJWT = (signupData) => {\n \n  console.log(signupData);\n  // first_name : \"\",\n  // last_name : \"\",\n  // email: \"\",\n  // password: \"\",\n  // mobile: \"\",\n  // confirmPass: \"\"\n  return dispatch => {\n    axios\n      .post(\"/api/authenticate/register/user\", {\n        email: 'john@doe.com',\n        password: '1234',\n        name: 'john',\n      })\n      .then(response => {\n        var loggedInUser\n\n        if(response.data){\n\n          console.log(response.data);\n\n          loggedInUser = response.data.user\n          \n          localStorage.setItem(\"token\", response.data.token)\n\n          dispatch({\n            type: \"LOGIN_WITH_JWT\",\n            payload: { loggedInUser, loggedInWith: \"jwt\" }\n          })\n\n          history.push(\"/\")\n        }\n\n      })\n      .catch(err => console.log(err))\n\n  }\n}\n"]},"metadata":{},"sourceType":"module"}