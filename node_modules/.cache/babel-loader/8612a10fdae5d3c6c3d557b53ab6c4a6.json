{"ast":null,"code":"import _classCallCheck from\"/Users/roy/Desktop/Projects/getFit-frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/roy/Desktop/Projects/getFit-frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/roy/Desktop/Projects/getFit-frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/roy/Desktop/Projects/getFit-frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{Link}from\"react-router-dom\";import{CardBody,FormGroup,Form,Input,Button,Label}from\"reactstrap\";import Checkbox from\"../../../../components/@vuexy/checkbox/CheckboxesVuexy\";import{Mail,Lock,Check}from\"react-feather\";import{loginWithJWT}from\"../../../../redux/actions/auth/loginActions\";import{connect}from\"react-redux\";import{history}from\"../../../../history\";import axios from\"axios\";import{Alert}from\"reactstrap\";// const history = useHistory();\nvar LoginJWT=/*#__PURE__*/function(_React$Component){_inherits(LoginJWT,_React$Component);var _super=_createSuper(LoginJWT);function LoginJWT(){var _this;_classCallCheck(this,LoginJWT);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={email:\"\",password:\"\",remember:false,error:\"\"};_this.handleLogin=function(e){e.preventDefault();_this.callApi();};return _this;}_createClass(LoginJWT,[{key:\"componentDidMount\",value:function componentDidMount(){}},{key:\"callApi\",value:function callApi(){var _this2=this;console.log('calling api');var _this$state=this.state,email=_this$state.email,password=_this$state.password;var base_url=\"http://localhost:2000\";axios.post(base_url+\"/api/v1/auth/login\",{email:email,password:password,login_type:'email'}).then(function(response){var loggedInUser;console.log(response.data.data);if(response.data){loggedInUser=response.data.data.user;_this2.props.loginWithJWT(loggedInUser);history.push(\"/profile\");}}).catch(function(err){if(err.response&&err.response.data){_this2.setState({error:err.response.data.error});}else{_this2.setState({error:\"Something went wrong\"});}});}},{key:\"render\",value:function render(){var _this3=this;var error=this.state.error;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(CardBody,{className:\"pt-1\"},error!==\"\"&&/*#__PURE__*/React.createElement(Alert,{color:\"warning\"},error),/*#__PURE__*/React.createElement(Form,{action:\"/\",onSubmit:this.handleLogin},/*#__PURE__*/React.createElement(FormGroup,{className:\"form-label-group position-relative has-icon-left\"},/*#__PURE__*/React.createElement(Input,{type:\"email\",placeholder:\"Email\",value:this.state.email,onChange:function onChange(e){return _this3.setState({email:e.target.value});},required:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-control-position\"},/*#__PURE__*/React.createElement(Mail,{size:15})),/*#__PURE__*/React.createElement(Label,null,\"Email\")),/*#__PURE__*/React.createElement(FormGroup,{className:\"form-label-group position-relative has-icon-left\"},/*#__PURE__*/React.createElement(Input,{type:\"password\",placeholder:\"Password\",value:this.state.password,onChange:function onChange(e){return _this3.setState({password:e.target.value});},required:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-control-position\"},/*#__PURE__*/React.createElement(Lock,{size:15})),/*#__PURE__*/React.createElement(Label,null,\"Password\")),/*#__PURE__*/React.createElement(FormGroup,{className:\"d-flex justify-content-between align-items-center\"},/*#__PURE__*/React.createElement(Checkbox,{color:\"primary\",icon:/*#__PURE__*/React.createElement(Check,{className:\"vx-icon\",size:16}),label:\"Remember me\",defaultChecked:false,onChange:this.handleRemember}),/*#__PURE__*/React.createElement(\"div\",{className:\"float-right\"},/*#__PURE__*/React.createElement(Link,{to:\"/forgetPassword\"},\"Forgot Password?\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between\"},/*#__PURE__*/React.createElement(Button.Ripple,{color:\"primary\",outline:true// onClick={() => {\n//   history.push(\"/register\")\n// }}\n,href:\"/register\"},\"Register\"),/*#__PURE__*/React.createElement(Button.Ripple,{color:\"primary\",type:\"submit\"},\"Login\")))));}}]);return LoginJWT;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{values:state.auth.login};};export default connect(mapStateToProps,{loginWithJWT:loginWithJWT})(LoginJWT);","map":{"version":3,"sources":["/Users/roy/Desktop/Projects/getFit-frontEnd/src/views/pages/authentication/login/LoginJWT.js"],"names":["React","Link","CardBody","FormGroup","Form","Input","Button","Label","Checkbox","Mail","Lock","Check","loginWithJWT","connect","history","axios","Alert","LoginJWT","state","email","password","remember","error","handleLogin","e","preventDefault","callApi","console","log","base_url","post","login_type","then","response","loggedInUser","data","user","props","push","catch","err","setState","target","value","handleRemember","Component","mapStateToProps","values","auth","login"],"mappings":"wnBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,QAAT,CAAmBC,SAAnB,CAA8BC,IAA9B,CAAoCC,KAApC,CAA2CC,MAA3C,CAAmDC,KAAnD,KAAgE,YAAhE,CACA,MAAOC,CAAAA,QAAP,KAAqB,wDAArB,CACA,OAASC,IAAT,CAAeC,IAAf,CAAqBC,KAArB,KAAkC,eAAlC,CACA,OAASC,YAAT,KAA6B,6CAA7B,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,OAAT,KAAwB,qBAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,KAAR,KAAoB,YAApB,CAEA;GACMC,CAAAA,Q,+UACJC,K,CAAQ,CACNC,KAAK,CAAE,EADD,CAENC,QAAQ,CAAE,EAFJ,CAGNC,QAAQ,CAAE,KAHJ,CAINC,KAAK,CAAG,EAJF,C,OAORC,W,CAAc,SAAAC,CAAC,CAAI,CACjBA,CAAC,CAACC,cAAF,GACA,MAAKC,OAAL,GACD,C,iGAEkB,CAElB,C,yCAEQ,iBACPC,OAAO,CAACC,GAAR,CAAY,aAAZ,EADO,gBAEmB,KAAKV,KAFxB,CAEAC,KAFA,aAEAA,KAFA,CAEOC,QAFP,aAEOA,QAFP,CAGP,GAAMS,CAAAA,QAAQ,CAAG,uBAAjB,CACCd,KAAK,CACHe,IADF,CACOD,QAAQ,CAAG,oBADlB,CACwC,CACrCV,KAAK,CAAEA,KAD8B,CAErCC,QAAQ,CAAEA,QAF2B,CAGrCW,UAAU,CAAG,OAHwB,CADxC,EAMEC,IANF,CAMO,SAAAC,QAAQ,CAAI,CAChB,GAAIC,CAAAA,YAAJ,CACAP,OAAO,CAACC,GAAR,CAAYK,QAAQ,CAACE,IAAT,CAAcA,IAA1B,EACA,GAAIF,QAAQ,CAACE,IAAb,CAAmB,CACjBD,YAAY,CAAGD,QAAQ,CAACE,IAAT,CAAcA,IAAd,CAAmBC,IAAlC,CACA,MAAI,CAACC,KAAL,CAAWzB,YAAX,CAAwBsB,YAAxB,EACApB,OAAO,CAACwB,IAAR,CAAa,UAAb,EACD,CACF,CAdF,EAeEC,KAfF,CAeQ,SAAAC,GAAG,CAAI,CACZ,GAAGA,GAAG,CAACP,QAAJ,EAAgBO,GAAG,CAACP,QAAJ,CAAaE,IAAhC,CAAqC,CACnC,MAAI,CAACM,QAAL,CAAc,CAACnB,KAAK,CAAGkB,GAAG,CAACP,QAAJ,CAAaE,IAAb,CAAkBb,KAA3B,CAAd,EACD,CAFD,IAEK,CACH,MAAI,CAACmB,QAAL,CAAc,CAACnB,KAAK,CAAG,sBAAT,CAAd,EACD,CACF,CArBF,EAsBF,C,uCAEQ,oBACAA,CAAAA,KADA,CACS,KAAKJ,KADd,CACAI,KADA,CAEP,mBACE,oBAAC,KAAD,CAAO,QAAP,mBACE,oBAAC,QAAD,EAAU,SAAS,CAAC,MAApB,EACGA,KAAK,GAAK,EAAV,eAAiB,oBAAC,KAAD,EAAO,KAAK,CAAC,SAAb,EAAwBA,KAAxB,CADpB,cAEE,oBAAC,IAAD,EAAM,MAAM,CAAC,GAAb,CAAiB,QAAQ,CAAE,KAAKC,WAAhC,eACE,oBAAC,SAAD,EAAW,SAAS,CAAC,kDAArB,eACE,oBAAC,KAAD,EACE,IAAI,CAAC,OADP,CAEE,WAAW,CAAC,OAFd,CAGE,KAAK,CAAE,KAAKL,KAAL,CAAWC,KAHpB,CAIE,QAAQ,CAAE,kBAAAK,CAAC,QAAI,CAAA,MAAI,CAACiB,QAAL,CAAc,CAAEtB,KAAK,CAAEK,CAAC,CAACkB,MAAF,CAASC,KAAlB,CAAd,CAAJ,EAJb,CAKE,QAAQ,KALV,EADF,cAQE,2BAAK,SAAS,CAAC,uBAAf,eACE,oBAAC,IAAD,EAAM,IAAI,CAAE,EAAZ,EADF,CARF,cAWE,oBAAC,KAAD,cAXF,CADF,cAcE,oBAAC,SAAD,EAAW,SAAS,CAAC,kDAArB,eACE,oBAAC,KAAD,EACE,IAAI,CAAC,UADP,CAEE,WAAW,CAAC,UAFd,CAGE,KAAK,CAAE,KAAKzB,KAAL,CAAWE,QAHpB,CAIE,QAAQ,CAAE,kBAAAI,CAAC,QAAI,CAAA,MAAI,CAACiB,QAAL,CAAc,CAAErB,QAAQ,CAAEI,CAAC,CAACkB,MAAF,CAASC,KAArB,CAAd,CAAJ,EAJb,CAKE,QAAQ,KALV,EADF,cAQE,2BAAK,SAAS,CAAC,uBAAf,eACE,oBAAC,IAAD,EAAM,IAAI,CAAE,EAAZ,EADF,CARF,cAWE,oBAAC,KAAD,iBAXF,CAdF,cA2BE,oBAAC,SAAD,EAAW,SAAS,CAAC,mDAArB,eACE,oBAAC,QAAD,EACE,KAAK,CAAC,SADR,CAEE,IAAI,cAAE,oBAAC,KAAD,EAAO,SAAS,CAAC,SAAjB,CAA2B,IAAI,CAAE,EAAjC,EAFR,CAGE,KAAK,CAAC,aAHR,CAIE,cAAc,CAAE,KAJlB,CAKE,QAAQ,CAAE,KAAKC,cALjB,EADF,cAQE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,IAAD,EAAM,EAAE,CAAC,iBAAT,qBADF,CARF,CA3BF,cAuCE,2BAAK,SAAS,CAAC,gCAAf,eACE,oBAAC,MAAD,CAAQ,MAAR,EACE,KAAK,CAAC,SADR,CAEE,OAAO,KACP;AACA;AACA;AALF,CAME,IAAI,CAAC,WANP,aADF,cAWE,oBAAC,MAAD,CAAQ,MAAR,EAAe,KAAK,CAAC,SAArB,CAA+B,IAAI,CAAC,QAApC,UAXF,CAvCF,CAFF,CADF,CADF,CA8DD,C,sBA7GoB5C,KAAK,CAAC6C,S,EA+G7B,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAA5B,KAAK,CAAI,CAC/B,MAAO,CACL6B,MAAM,CAAE7B,KAAK,CAAC8B,IAAN,CAAWC,KADd,CAAP,CAGD,CAJD,CAKA,cAAepC,CAAAA,OAAO,CAACiC,eAAD,CAAkB,CAAElC,YAAY,CAAZA,YAAF,CAAlB,CAAP,CAA2CK,QAA3C,CAAf","sourcesContent":["import React from \"react\"\nimport { Link } from \"react-router-dom\"\nimport { CardBody, FormGroup, Form, Input, Button, Label } from \"reactstrap\"\nimport Checkbox from \"../../../../components/@vuexy/checkbox/CheckboxesVuexy\"\nimport { Mail, Lock, Check } from \"react-feather\"\nimport { loginWithJWT } from \"../../../../redux/actions/auth/loginActions\"\nimport { connect } from \"react-redux\"\nimport { history } from \"../../../../history\"\nimport axios from \"axios\";\nimport {Alert} from \"reactstrap\";\n\n// const history = useHistory();\nclass LoginJWT extends React.Component {\n  state = {\n    email: \"\",\n    password: \"\",\n    remember: false,\n    error : \"\",\n  }\n\n  handleLogin = e => {\n    e.preventDefault()\n    this.callApi();\n  }\n\n  componentDidMount(){\n\n  }\n\n  callApi(){\n    console.log('calling api');\n    const {email, password} = this.state;\n    const base_url = \"http://localhost:2000\";\n     axios\n      .post(base_url + \"/api/v1/auth/login\", {\n        email: email,\n        password: password,\n        login_type : 'email',\n      })\n      .then(response => {\n        var loggedInUser\n        console.log(response.data.data);\n        if (response.data) {\n          loggedInUser = response.data.data.user\n          this.props.loginWithJWT(loggedInUser);\n          history.push(\"/profile\");\n        }\n      })\n      .catch(err => {\n        if(err.response && err.response.data){\n          this.setState({error : err.response.data.error});\n        }else{\n          this.setState({error : \"Something went wrong\"});\n        }\n      })\n  }\n\n  render() {\n    const {error} = this.state;\n    return (\n      <React.Fragment>\n        <CardBody className=\"pt-1\">\n          {error !== \"\" &&  <Alert color=\"warning\">{error}</Alert>}\n          <Form action=\"/\" onSubmit={this.handleLogin}>\n            <FormGroup className=\"form-label-group position-relative has-icon-left\">\n              <Input\n                type=\"email\"\n                placeholder=\"Email\"\n                value={this.state.email}\n                onChange={e => this.setState({ email: e.target.value })}\n                required\n              />\n              <div className=\"form-control-position\">\n                <Mail size={15} />\n              </div>\n              <Label>Email</Label>\n            </FormGroup>\n            <FormGroup className=\"form-label-group position-relative has-icon-left\">\n              <Input\n                type=\"password\"\n                placeholder=\"Password\"\n                value={this.state.password}\n                onChange={e => this.setState({ password: e.target.value })}\n                required\n              />\n              <div className=\"form-control-position\">\n                <Lock size={15} />\n              </div>\n              <Label>Password</Label>\n            </FormGroup>\n            <FormGroup className=\"d-flex justify-content-between align-items-center\">\n              <Checkbox\n                color=\"primary\"\n                icon={<Check className=\"vx-icon\" size={16} />}\n                label=\"Remember me\"\n                defaultChecked={false}\n                onChange={this.handleRemember}\n              />\n              <div className=\"float-right\">\n                <Link to=\"/forgetPassword\">Forgot Password?</Link>\n              </div>\n            </FormGroup>\n            <div className=\"d-flex justify-content-between\">\n              <Button.Ripple\n                color=\"primary\"\n                outline\n                // onClick={() => {\n                //   history.push(\"/register\")\n                // }}\n                href=\"/register\"\n              >\n                Register\n              </Button.Ripple>\n              <Button.Ripple color=\"primary\" type=\"submit\">\n                Login\n              </Button.Ripple>\n            </div>\n          </Form>\n        </CardBody>\n      </React.Fragment>\n    )\n  }\n}\nconst mapStateToProps = state => {\n  return {\n    values: state.auth.login\n  }\n}\nexport default connect(mapStateToProps, { loginWithJWT })(LoginJWT)\n"]},"metadata":{},"sourceType":"module"}